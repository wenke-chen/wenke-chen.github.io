<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='ËÆ∞ÂΩï‰ªé0Âà∞1Â≠¶‰π†Âπ≥Ë°°ËΩ¶ÁöÑËøáÁ®ã'>
<title>Âü∫‰∫éÊó†Âà∑ÁîµÊú∫ÁöÑÂπ≥Ë°°Â∞èËΩ¶</title>

<link rel='canonical' href='https://www.wenke-chen.github.io/p/segway/'>

<link rel="stylesheet" href="/scss/style.min.abbd69b2908fdfcd5179898beaafd374514a86538d81639ddd2c58c06ae54e40.css"><meta property='og:title' content='Âü∫‰∫éÊó†Âà∑ÁîµÊú∫ÁöÑÂπ≥Ë°°Â∞èËΩ¶'>
<meta property='og:description' content='ËÆ∞ÂΩï‰ªé0Âà∞1Â≠¶‰π†Âπ≥Ë°°ËΩ¶ÁöÑËøáÁ®ã'>
<meta property='og:url' content='https://www.wenke-chen.github.io/p/segway/'>
<meta property='og:site_name' content='wenke-chen&#39;s blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Âπ≥Ë°°Â∞èËΩ¶' /><meta property='article:tag' content='Êó†Âà∑ÁîµÊú∫' /><meta property='article:tag' content='Êú∫Âô®‰∫∫' /><meta property='article:tag' content='STM32' /><meta property='article:published_time' content='2025-07-11T22:47:51&#43;08:00'/><meta property='article:modified_time' content='2025-07-11T22:47:51&#43;08:00'/><meta property='og:image' content='https://www.wenke-chen.github.io/p/segway/car.png' />
<meta name="twitter:title" content="Âü∫‰∫éÊó†Âà∑ÁîµÊú∫ÁöÑÂπ≥Ë°°Â∞èËΩ¶">
<meta name="twitter:description" content="ËÆ∞ÂΩï‰ªé0Âà∞1Â≠¶‰π†Âπ≥Ë°°ËΩ¶ÁöÑËøáÁ®ã"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://www.wenke-chen.github.io/p/segway/car.png' />
    <link rel="shortcut icon" href="/favicon.png" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/learn_dog_hu42490b1a39612587b65eb91d2414c2d9_387376_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">wenke-chen&#39;s blog</a></h1>
            <h2 class="site-description">Â≠¶Â¶ÇÈÄÜÊ∞¥Ë°åËàüÔºå‰∏çËøõÂàôÈÄÄ„ÄÇ</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://www.wenke-chen.github.io/" selected></option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#‰∏ÄÁâ©ÊñôÊ∏ÖÂçï">‰∏Ä„ÄÅÁâ©ÊñôÊ∏ÖÂçï</a></li>
    <li><a href="#‰∫åÁîµÊ∞îÊé•Á∫øÂõæ">‰∫å„ÄÅÁîµÊ∞îÊé•Á∫øÂõæ</a></li>
    <li><a href="#‰∏âÁõ∏ÂÖ≥ÁÆóÊ≥ïÁêÜËÆ∫">‰∏â„ÄÅÁõ∏ÂÖ≥ÁÆóÊ≥ïÁêÜËÆ∫</a>
      <ol>
        <li><a href="#1ÁîµÊú∫ËΩ¨Âä®">1„ÄÅÁîµÊú∫ËΩ¨Âä®</a></li>
        <li><a href="#2Â∞èËΩ¶Áõ¥Á´ã">2„ÄÅÂ∞èËΩ¶Áõ¥Á´ã</a>
          <ol>
            <li><a href="#lqrÂíåpidÊéßÂà∂ÁÆóÊ≥ïÁöÑÂØπÊØî">LQRÂíåPIDÊéßÂà∂ÁÆóÊ≥ïÁöÑÂØπÊØî</a></li>
            <li><a href="#lqrÊï∞Â≠¶Ê®°Âûã">LQRÊï∞Â≠¶Ê®°Âûã</a></li>
            <li><a href="#lqrÊéßÂà∂Âô®">LQRÊéßÂà∂Âô®</a></li>
            <li><a href="#‰ªøÁúü">‰ªøÁúü</a></li>
            <li><a href="#ÂèÇËÄÉËµÑÊñô">ÂèÇËÄÉËµÑÊñô</a></li>
            <li><a href="#ÂÆûÁâ©ÈÉ®ÁΩ≤">ÂÆûÁâ©ÈÉ®ÁΩ≤</a></li>
          </ol>
        </li>
        <li><a href="#3Â∞èËΩ¶ÈÅ•Êéß">3„ÄÅÂ∞èËΩ¶ÈÅ•Êéß</a></li>
      </ol>
    </li>
    <li><a href="#ÂõõË∞ÉËØïÂøÉÂæó">Âõõ„ÄÅË∞ÉËØïÂøÉÂæó</a></li>
    <li><a href="#‰∫îÂÆûÁâ©Â±ïÁ§∫">‰∫î„ÄÅÂÆûÁâ©Â±ïÁ§∫</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/segway/">
                <img src="/p/segway/car_huedaa8f5f72a7c1929b4fa5b365acec86_54738_800x0_resize_box_3.png"
                        srcset="/p/segway/car_huedaa8f5f72a7c1929b4fa5b365acec86_54738_800x0_resize_box_3.png 800w, /p/segway/car_huedaa8f5f72a7c1929b4fa5b365acec86_54738_1600x0_resize_box_3.png 1600w"
                        width="800" 
                        height="316" 
                        loading="lazy"
                        alt="Featured image of post Âü∫‰∫éÊó†Âà∑ÁîµÊú∫ÁöÑÂπ≥Ë°°Â∞èËΩ¶" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E5%AD%A6%E4%B9%A0/" >
                Â≠¶‰π†
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/segway/">Âü∫‰∫éÊó†Âà∑ÁîµÊú∫ÁöÑÂπ≥Ë°°Â∞èËΩ¶</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            ËÆ∞ÂΩï‰ªé0Âà∞1Â≠¶‰π†Âπ≥Ë°°ËΩ¶ÁöÑËøáÁ®ã
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jul 11, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    12 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="‰∏ÄÁâ©ÊñôÊ∏ÖÂçï">‰∏Ä„ÄÅÁâ©ÊñôÊ∏ÖÂçï</h2>
<div align="center">  
<img src="Áâ©ÊñôÊ∏ÖÂçï.png" width="600"/> 
</div>
<p>Áâ©ÊñôÊ∏ÖÂçïÂåÖÂê´ÊâÄÁî®Âà∞ÁöÑÁîµÂ≠ê‰ª∂„ÄÅÊú∫Ê¢∞‰ª∂Âíå3DÊâìÂç∞‰ª∂ÔºåÂπ∂ÂØπÈ¢ùÂ§ñÁöÑÂ∑•ÂÖ∑‰Ωú‰∫ÜËØ¥ÊòéÔºåÊú¨Ê¨°ÁîµÊú∫Âíåstm32ÂºÄÂèëÊùøÁî®ÁöÑÊòØÂêå‰∏Ä‰∏™<a class="link" href="https://gitee.com/kit-miao/damiao"  target="_blank" rel="noopener"
    >ÂéÇÂÆ∂ÁöÑ‰∫ßÂìÅ</a>ÔºåÁîµÊú∫Ëá™Â∏¶È©±Âä®ÔºåÁúÅÂéª‰∫ÜËá™ÂÜôFOCÁÆóÊ≥ïÔºåÂè™ÈúÄÁÜüÊÇâÁîµÊú∫ÈÄö‰ø°ÂçèËÆÆÂç≥ÂèØÂØπÁîµÊú∫ÊúâËæÉÂ•ΩÁöÑÊéßÂà∂Ôºå‰∏îÂéÇÂÆ∂Ëá™Â∏¶ÁöÑËåÉ‰æãÂ∑≤ËÉΩÂ∫î‰ªòÂæàÂ§öÂú∫ÊôØ„ÄÇ</p>
<h2 id="‰∫åÁîµÊ∞îÊé•Á∫øÂõæ">‰∫å„ÄÅÁîµÊ∞îÊé•Á∫øÂõæ</h2>
<div align="center">  
<img src="ÁîµÊ∞îÊé•Á∫øÂõæ.png" width="700"/> 
</div>
<p>ÁîµÊú∫Ë¶ÅÂÖàÈÖçÂ•ΩID,esp32ÂºÄÂèëÊùøË¶ÅÂÖàÂà∑Â•ΩÁ®ãÂ∫èÂÜçÂºÄÂßãÁªÑË£Ö„ÄÇ</p>
<h2 id="‰∏âÁõ∏ÂÖ≥ÁÆóÊ≥ïÁêÜËÆ∫">‰∏â„ÄÅÁõ∏ÂÖ≥ÁÆóÊ≥ïÁêÜËÆ∫</h2>
<p>È¶ñÂÖàË¶ÅÁ°ÆÂÆöÊàë‰ª¨Ë¶ÅÂÆûÁé∞ÂäüËÉΩÁöÑÂÖàÂêéÈ°∫Â∫èÔºåÂç≥ÁîµÊú∫ËΩ¨Âä®&ndash;&gt;Â∞èËΩ¶Áõ¥Á´ã&ndash;&gt;Â∞èËΩ¶ÈÅ•Êéß„ÄÇ</p>
<div align="center">  
<img src="ÊµÅÁ®ãÂõæ.png" width="700"/> 
</div>
<h3 id="1ÁîµÊú∫ËΩ¨Âä®">1„ÄÅÁîµÊú∫ËΩ¨Âä®</h3>
<p><strong>Êú¨Ê¨°Áî®ÁöÑÁõ¥Á´ãÁÆóÊ≥ïÊòØLQR,ËæìÂá∫ÁöÑÊòØÂäõÁü©ÔºåÊâÄ‰ª•Áî®ÁîµÊú∫ÁöÑMITÊ®°Âºè„ÄÇ</strong></p>
<div align="center">  
<img src="MITÊ®°Âºè‰∏ãÊéßÂà∂Â∏ß.png" width="600"/> 
</div>
<p><strong>Ê†πÊçÆÈÄö‰ø°ÂçèËÆÆÔºåÊàë‰ª¨Êü•ÁúãÂéÇÂÆ∂ÁªôÁöÑCANÊéßÂà∂ÂáΩÊï∞ËåÉ‰æã„ÄÇ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/**
</span></span><span class="line"><span class="cl">************************************************************************
</span></span><span class="line"><span class="cl">* @brief:      	mit_ctrl: MITÊ®°Âºè‰∏ãÁöÑÁîµÊú∫ÊéßÂà∂ÂáΩÊï∞
</span></span><span class="line"><span class="cl">* @param[in]:   hcan:			ÊåáÂêëCAN_HandleTypeDefÁªìÊûÑÁöÑÊåáÈíàÔºåÁî®‰∫éÊåáÂÆöCANÊÄªÁ∫ø
</span></span><span class="line"><span class="cl">* @param[in]:   motor_id:	ÁîµÊú∫IDÔºåÊåáÂÆöÁõÆÊ†áÁîµÊú∫
</span></span><span class="line"><span class="cl">* @param[in]:   pos:			‰ΩçÁΩÆÁªôÂÆöÂÄº
</span></span><span class="line"><span class="cl">* @param[in]:   vel:			ÈÄüÂ∫¶ÁªôÂÆöÂÄº
</span></span><span class="line"><span class="cl">* @param[in]:   kp:				‰ΩçÁΩÆÊØî‰æãÁ≥ªÊï∞
</span></span><span class="line"><span class="cl">* @param[in]:   kd:				‰ΩçÁΩÆÂæÆÂàÜÁ≥ªÊï∞
</span></span><span class="line"><span class="cl">* @param[in]:   torq:			ËΩ¨Áü©ÁªôÂÆöÂÄº
</span></span><span class="line"><span class="cl">* @retval:     	void
</span></span><span class="line"><span class="cl">* @details:    	ÈÄöËøáCANÊÄªÁ∫øÂêëÁîµÊú∫ÂèëÈÄÅMITÊ®°Âºè‰∏ãÁöÑÊéßÂà∂Â∏ß„ÄÇ
</span></span><span class="line"><span class="cl">************************************************************************
</span></span><span class="line"><span class="cl">**/
</span></span><span class="line"><span class="cl">void mit_ctrl(hcan_t* hcan, uint16_t motor_id, float pos, float vel,float kp, float kd, float torq)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">	uint8_t data[8];
</span></span><span class="line"><span class="cl">	uint16_t pos_tmp,vel_tmp,kp_tmp,kd_tmp,tor_tmp;
</span></span><span class="line"><span class="cl">	uint16_t id = motor_id + MIT_MODE;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	pos_tmp = float_to_uint(pos,  P_MIN,  P_MAX,  16);
</span></span><span class="line"><span class="cl">	vel_tmp = float_to_uint(vel,  V_MIN,  V_MAX,  12);
</span></span><span class="line"><span class="cl">	kp_tmp  = float_to_uint(kp,   KP_MIN, KP_MAX, 12);
</span></span><span class="line"><span class="cl">	kd_tmp  = float_to_uint(kd,   KD_MIN, KD_MAX, 12);
</span></span><span class="line"><span class="cl">	tor_tmp = float_to_uint(torq, T_MIN,  T_MAX,  12);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	data[0] = (pos_tmp &gt;&gt; 8);
</span></span><span class="line"><span class="cl">	data[1] = pos_tmp;
</span></span><span class="line"><span class="cl">	data[2] = (vel_tmp &gt;&gt; 4);
</span></span><span class="line"><span class="cl">	data[3] = ((vel_tmp&amp;0xF)&lt;&lt;4)|(kp_tmp&gt;&gt;8);
</span></span><span class="line"><span class="cl">	data[4] = kp_tmp;
</span></span><span class="line"><span class="cl">	data[5] = (kd_tmp &gt;&gt; 4);
</span></span><span class="line"><span class="cl">	data[6] = ((kd_tmp&amp;0xF)&lt;&lt;4)|(tor_tmp&gt;&gt;8);
</span></span><span class="line"><span class="cl">	data[7] = tor_tmp;
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	canx_send_data(hcan, id, data, 8);
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>*MITÂëΩ‰ª§ÈááÁî®ÊµÆÁÇπÊï∞ÊçÆÁ≠âÊØî‰æãËΩ¨Êç¢ÊàêÊï¥Êï∞ÂèëÈÄÅÂà∞È©±Âä®Âô®ÔºåÈ©±Âä®Âô®ÂÜçÂ∞ÜÊé•Êî∂Âà∞ÁöÑÊï¥Êï∞Á≠âÊØî‰æãËΩ¨Êç¢ÊàêÊµÆÁÇπÊï∞ÊçÆ„ÄÇËøôËΩ¨Êç¢ÈúÄË¶ÅÁî®Âà∞ËΩ¨Êç¢ÂáΩÊï∞float_to_uintÔºåËøôËΩ¨Êç¢ÂáΩÊï∞ÈúÄË¶ÅÈ¶ñÂÖàÁ°ÆÂÆö‰∏§‰∏™Á≠âÊØî‰æãËΩ¨Êç¢ÁöÑÊúÄÂ§ßÊúÄÂ∞èÂÄºÔºåËøô‰∏§‰∏™ÂÄºÂèØ‰ª•Âú®‰∏ä‰ΩçÂèÇÊï∞ËÆæÂÆöÈ°µÈù¢Êü•ËØ¢ÔºåÂÖ∂‰∏≠ KP„ÄÅKD ÁöÑÊúÄÂ§ßÊúÄÂ∞èÂÄºÈªòËÆ§ÂàÜÂà´‰∏∫ 0.0~500.0„ÄÅ0.0~5.0„ÄÇPos„ÄÅVel„ÄÅTorque ÂàÜÂà´È¢ÑËÆæ‰∏∫¬±12.5„ÄÅ¬±30„ÄÅ¬±10ÔºåËøô‰∏â‰∏™ÂèÇÊï∞ÂèØ‰ª•Ê†πÊçÆÁîµÊú∫ÁöÑÂÆûÈôÖÂèÇÊï∞ËøõË°åË∞ÉÊï¥„ÄÇ‰ΩÜÂèëÈÄÅÊéßÂà∂ÂëΩ‰ª§Êó∂Ôºå‰∏ÄÂÆöË¶Å‰∏éËÆæÂÆöÂÄº‰øùÊåÅËá¥ÔºåÂê¶Âàô‰ºöÊéßÂà∂ÂëΩ‰ª§‰ºöÂèëÁîüÁ≠âÊØî‰æãÁº©Êîæ„ÄÇ</p>
<p><strong>‰∏ãÂõæÊòØÁîµÊú∫MITÊ®°ÂºèÁöÑÊéßÂà∂Ê°ÜÂõæ</strong></p>
<div align="center">  
<img src="MITÊ®°ÂºèÊéßÂà∂Ê°ÜÂõæ.png" width="600"/> 
</div>
MITÊ®°ÂºèÂèØÂÆûÁé∞ÂäõÁü©„ÄÅ‰ΩçÁΩÆ„ÄÅÈÄüÂ∫¶‰∏âËÄÖÊ∑∑ÂêàÊéßÂà∂ÔºåÂú®‰∏äÂõæ‰∏≠Ôºå‰ΩçÁΩÆÁéØ‰∏éÈÄüÂ∫¶ÁéØÊòØÂπ∂ËÅîÂΩ¢ÂºèÔºåËøôÈáåÁöÑ‰ΩçÁΩÆÁéØ‰∏éÈÄüÂ∫¶ÁéØÁöÑËæìÂá∫ÂÄº‰∏éÂâçÈ¶àÂäõÁü©t_ffÁõ∏Âä†ÂæóÂà∞ÂèÇËÄÉÂäõÁü©T_refÔºö
<div align="center">  
<img src="ÂäõÁü©ËÆ°ÁÆóÂÖ¨Âºè.png" width="600"/> 
</div>
ÂÖ∂‰∏≠:<br> 
T_ref ‰∏∫ÂèÇËÄÉÂäõÁü©ÔºåÂçï‰ΩçÊòØ N¬∑m„ÄÇ <br>  
kp ‰∏∫‰ΩçÁΩÆÂ¢ûÁõä„ÄÇkd ‰∏∫ÈÄüÂ∫¶Â¢ûÁõä„ÄÇ  <br> 
p_des ‰∏∫ÁîµÊú∫ËæìÂá∫ËΩ¥ÁöÑÊúüÊúõ‰ΩçÁΩÆÔºåÂçï‰Ωç‰∏∫ rad„ÄÇ  <br> 
Œ∏m ‰∏∫ÁîµÊú∫ËæìÂá∫ËΩ¥ÁöÑÂΩìÂâç‰ΩçÁΩÆÔºåÂçï‰Ωç‰∏∫ rad„ÄÇ  <br> 
v_des ‰∏∫ÁîµÊú∫ËæìÂá∫ËΩ¥ÁöÑÊúüÊúõÈÄüÂ∫¶ÔºåÂçï‰Ωç‰∏∫ rad/s„ÄÇ<br> 
‰∏∫ÁîµÊú∫ËæìÂá∫ËΩ¥ÁöÑÂΩìÂâçÈÄüÂ∫¶ÔºåÂçï‰Ωç‰∏∫ rad/s„ÄÇ   <br> 
ÂèÇËÄÉÂäõÁü© T_ref ÁªèËøá KT_OUT Êç¢ÁÆóÔºåÂæóÂà∞ÂèÇËÄÉÁîµÊµÅ iqrefÔºå‰ªéËÄåËøõÂÖ•ÂêéÁª≠ÁöÑÁîµÊµÅ PI ÊéßÂà∂Âô®„ÄÇ<br>   
ÂÖ∂‰∏≠Ôºö
<div align="center">  
<img src="iqrf.png" width="600"/> 
</div>
<p>iqref ‰∏∫ÂèÇËÄÉÁîµÊµÅÔºåÂçï‰Ωç‰∏∫ A„ÄÇ<br>
GR ‰∏∫ÁîµÊú∫ÂáèÈÄüÊØî„ÄÇ<br>
Kt ‰∏∫ÂáèÈÄüÂâçÁöÑËΩ¨Áü©Â∏∏Êï∞ÔºåÂçï‰ΩçÊòØ N¬∑m/A„ÄÇ<br>
NPP ÊòØÊûÅÂØπÊï∞„ÄÇ<br>
flux Á£ÅÈìæÔºåÂçï‰ΩçÊòØ WbÔºåÂèØ‰ª•ÈÄöËøáËØªÁîµÊú∫ÂèÇÊï∞ÂæóÂá∫„ÄÇ<br></p>
<p><strong>Ê†πÊçÆÂéÇÂÆ∂ÁöÑÈÄö‰ø°ÂçèËÆÆÔºåÊØèÊ¨°ÂèëÈÄÅÊåá‰ª§Âêé‰ºöÊúâÂèçÈ¶àÂ∏ßÔºåÂØπÂèçÈ¶àÂ∏ßÂ§ÑÁêÜÂèØÂæóÂà∞ÂåÖÊã¨ÁîµÊú∫ID„ÄÅÁä∂ÊÄÅ„ÄÅ‰ΩçÁΩÆ„ÄÅÈÄüÂ∫¶„ÄÅÊâ≠Áü©Áõ∏ÂÖ≥Ê∏©Â∫¶ÂèÇÊï∞„ÄÅÂØÑÂ≠òÂô®Êï∞ÊçÆÁ≠â„ÄÇ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/**
</span></span><span class="line"><span class="cl">************************************************************************
</span></span><span class="line"><span class="cl">* @brief:      	dm4310_fbdata: Ëé∑ÂèñDM4310ÁîµÊú∫ÂèçÈ¶àÊï∞ÊçÆÂáΩÊï∞
</span></span><span class="line"><span class="cl">* @param[in]:   motor:    ÊåáÂêëmotor_tÁªìÊûÑÁöÑÊåáÈíàÔºåÂåÖÂê´ÁîµÊú∫Áõ∏ÂÖ≥‰ø°ÊÅØÂíåÂèçÈ¶àÊï∞ÊçÆ
</span></span><span class="line"><span class="cl">* @param[in]:   rx_data:  ÊåáÂêëÂåÖÂê´ÂèçÈ¶àÊï∞ÊçÆÁöÑÊï∞ÁªÑÊåáÈíà
</span></span><span class="line"><span class="cl">* @param[in]:   data_len: Êï∞ÊçÆÈïøÂ∫¶
</span></span><span class="line"><span class="cl">* @retval:     	void
</span></span><span class="line"><span class="cl">* @details:    	‰ªéÊé•Êî∂Âà∞ÁöÑÊï∞ÊçÆ‰∏≠ÊèêÂèñDM4310ÁîµÊú∫ÁöÑÂèçÈ¶à‰ø°ÊÅØÔºåÂåÖÊã¨ÁîµÊú∫ID„ÄÅ
</span></span><span class="line"><span class="cl">*               Áä∂ÊÄÅ„ÄÅ‰ΩçÁΩÆ„ÄÅÈÄüÂ∫¶„ÄÅÊâ≠Áü©Áõ∏ÂÖ≥Ê∏©Â∫¶ÂèÇÊï∞„ÄÅÂØÑÂ≠òÂô®Êï∞ÊçÆÁ≠â
</span></span><span class="line"><span class="cl">************************************************************************
</span></span><span class="line"><span class="cl">**/
</span></span><span class="line"><span class="cl">void dm4310_fbdata(Joint_Motor_t *motor, uint8_t *rx_data,uint32_t data_len)
</span></span><span class="line"><span class="cl">{ 
</span></span><span class="line"><span class="cl">	if(data_len==FDCAN_DLC_BYTES_8)
</span></span><span class="line"><span class="cl">	{//ËøîÂõûÁöÑÊï∞ÊçÆÊúâ8‰∏™Â≠óËäÇ
</span></span><span class="line"><span class="cl">	  motor-&gt;para.id = (rx_data[0])&amp;0x0F;
</span></span><span class="line"><span class="cl">	  motor-&gt;para.state = (rx_data[0])&gt;&gt;4;
</span></span><span class="line"><span class="cl">	  motor-&gt;para.p_int=(rx_data[1]&lt;&lt;8)|rx_data[2];
</span></span><span class="line"><span class="cl">	  motor-&gt;para.v_int=(rx_data[3]&lt;&lt;4)|(rx_data[4]&gt;&gt;4);
</span></span><span class="line"><span class="cl">	  motor-&gt;para.t_int=((rx_data[4]&amp;0xF)&lt;&lt;8)|rx_data[5];
</span></span><span class="line"><span class="cl">	  motor-&gt;para.pos = uint_to_float(motor-&gt;para.p_int, P_MIN, P_MAX, 16); // (-12.5,12.5)
</span></span><span class="line"><span class="cl">	  motor-&gt;para.vel = uint_to_float(motor-&gt;para.v_int, V_MIN, V_MAX, 12); // (-30.0,30.0)
</span></span><span class="line"><span class="cl">	  motor-&gt;para.tor = uint_to_float(motor-&gt;para.t_int, T_MIN, T_MAX, 12);  // (-10.0,10.0)
</span></span><span class="line"><span class="cl">	  motor-&gt;para.Tmos = (float)(rx_data[6]);
</span></span><span class="line"><span class="cl">	  motor-&gt;para.Tcoil = (float)(rx_data[7]);
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÜç‰∏ã‰∏ÄÂ±ÇÂ∞±ÊòØstm32halÂ∫ìÁöÑcanÂàùÂßãÂåñÂíåÂèëÈÄÅÊé•Êî∂ÂáΩÊï∞‰∫Ü„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">void MX_FDCAN1_Init(void)
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">uint8_t canx_send_data(FDCAN_HandleTypeDef *hcan, uint16_t id, uint8_t *data, uint32_t len)
</span></span><span class="line"><span class="cl">....
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="2Â∞èËΩ¶Áõ¥Á´ã">2„ÄÅÂ∞èËΩ¶Áõ¥Á´ã</h3>
<h4 id="lqrÂíåpidÊéßÂà∂ÁÆóÊ≥ïÁöÑÂØπÊØî">LQRÂíåPIDÊéßÂà∂ÁÆóÊ≥ïÁöÑÂØπÊØî</h4>
<p><strong>ÂØπÊØîÂ¶Ç‰∏ãË°®ÔºàÊëòËá™ÁΩëÁªúÔºâ„ÄÇ</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left">ÁâπÊÄß</th>
<th style="text-align:left">LQR</th>
<th style="text-align:left">PID</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ÊéßÂà∂ÂØπË±°</td>
<td style="text-align:left">Â§öÂèòÈáèËÄ¶ÂêàÁ≥ªÁªüÔºàÂ¶ÇÂ∞èËΩ¶ËßíÂ∫¶+‰ΩçÁΩÆÔºâ</td>
<td style="text-align:left">ÂçïÂèòÈáèÁ≥ªÁªüÔºàÂ¶ÇÊ∞¥Ê∏©Ôºâ</td>
</tr>
<tr>
<td style="text-align:left">ËÆæËÆ°ÂéüÁêÜ</td>
<td style="text-align:left">Âü∫‰∫éÊï∞Â≠¶Ê®°Âûã‰ºòÂåñÔºàËß£ Riccati ÊñπÁ®ãÔºâ</td>
<td style="text-align:left">Âü∫‰∫éËØØÂ∑ÆÁªèÈ™åË∞ÉÂèÇ</td>
</tr>
<tr>
<td style="text-align:left">Ê†∏ÂøÉ‰ºòÂäø</td>
<td style="text-align:left">ÂÖ®Â±ÄÊúÄ‰ºò ‚Ä¢ Â§öÁä∂ÊÄÅËá™Âä®ÂçèË∞É</td>
<td style="text-align:left">ÁÆÄÂçïÊòìÁî® ‚Ä¢ Êó†ÈúÄÊ®°Âûã</td>
</tr>
<tr>
<td style="text-align:left">ÂèÇÊï∞Ë∞ÉÊï¥</td>
<td style="text-align:left">Ë∞ÉÊùÉÈáçÁü©ÈòµÔºàQ/RÔºâ</td>
<td style="text-align:left">Ë∞É‰∏â‰∏™Á≥ªÊï∞ÔºàKp/Ki/KdÔºâ</td>
</tr>
<tr>
<td style="text-align:left">ÊäóÂπ≤Êâ∞ËÉΩÂäõ</td>
<td style="text-align:left">‚úÖ Êõ¥Âº∫ÔºàÈÄöËøáÁä∂ÊÄÅÊùÉÈáç‰∏ªÂä®ÊäëÂà∂Ôºâ</td>
<td style="text-align:left">‚ùå È´òÈ¢ëÂô™Â£∞ÊòìÊîæÂ§ß</td>
</tr>
<tr>
<td style="text-align:left">ÈÄÇÁî®Á≥ªÁªü</td>
<td style="text-align:left">Á∫øÊÄßÁ≥ªÁªü ‚Ä¢ Á≤æÁ°ÆÂª∫Ê®°Âú∫ÊôØ</td>
<td style="text-align:left">ÈùûÁ∫øÊÄßÁ≥ªÁªü ‚Ä¢ Ê®°ÂûãÊú™Áü•Âú∫ÊôØ</td>
</tr>
<tr>
<td style="text-align:left">ËÆ°ÁÆóÂ§çÊùÇÂ∫¶</td>
<td style="text-align:left">Á¶ªÁ∫øËÆ°ÁÆóÂ§çÊùÇ ‚Ä¢ Âú®Á∫øËÆ°ÁÆóÁÆÄÂçï</td>
<td style="text-align:left">ÂÖ®Á®ãËÆ°ÁÆóÁÆÄÂçï</td>
</tr>
<tr>
<td style="text-align:left">ÂÖ∏ÂûãÂ∫îÁî®</td>
<td style="text-align:left">ÂÄíÁ´ãÊëÜ ‚Ä¢ Êó†‰∫∫Êú∫ ‚Ä¢ Êú∫Ê¢∞ËáÇ</td>
<td style="text-align:left">Ê∏©Êéß ‚Ä¢ Ê∂≤‰ΩçÊéßÂà∂ ‚Ä¢ ÁîµÊú∫Ë∞ÉÈÄü</td>
</tr>
</tbody>
</table></div>
<p>ËøôÈáåÁõ¥Á´ãÁÆóÊ≥ïÈÄâÊã©Áî®LQRÔºåÂêéÈù¢ÊúâÊó∂Èó¥‰πü‰ºöÂá∫‰∏ÄÁâàPIDÁöÑÁ®ãÂ∫è„ÄÇ</p>
<h4 id="lqrÊï∞Â≠¶Ê®°Âûã">LQRÊï∞Â≠¶Ê®°Âûã</h4>
<div align="center">  
<img src="car.png" width="600"/> 
</div>
<p><strong>ËøêÂä®Â≠¶</strong><br>
ËøêÂä®Â≠¶Ê®°Âûã‰∏ªË¶ÅÊèèËø∞‰∏§ËΩÆËá™Âπ≥Ë°°Êú∫Âô®‰∫∫ËøêÂä®ÈÄüÂ∫¶„ÄÅËΩ¨ÂêëÂíåÂ∑¶Âè≥‰∏§ËΩÆÈÄüÂ∫¶‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÇ</p>
<p><strong>Âä®ÂäõÂ≠¶</strong><br>
a.ÂØπ‰∫éËΩ¶ËΩÆ<br>
ÈíàÂØπÂè≥ËΩÆËøõË°åÂèóÂäõÂàÜÊûê</p>
<div align="center">  
<img src="Âè≥ËΩÆÂèóÂäõÂàÜÊûê.png" width="300"/> 
</div>
ËΩ¶ËΩÆÁöÑËøêÂä®ÂèØÂàÜËß£‰∏∫Âπ≥Âä®ÂíåËΩ¨Âä®ÔºåÂàôÁî±ÁâõÈ°øÁ¨¨‰∫åÂÆöÂæãÂèØÂæóÔºö
<div align="center">  
<img src="ÂÖ¨Âºè1.png" width="600"/> 
</div>
Áî±Âàö‰ΩìÂÆöËΩ¥ËΩ¨Âä®ÂÆöÂæãÂèØÂæó
<div align="center">  
<img src="ÂÖ¨Âºè2.png" width="600"/> 
</div>
‰∏äÂºèÔºà1ÔºâÔºà2Ôºâ‰∏≠   <br>
m‰∏∫ËΩ¶ËΩÆÁöÑË¥®ÈáèÔºàkgÔºâÔºõ<br>
r‰∏∫ËΩ¶ËΩÆÁöÑÂçäÂæÑÔºàmÔºâÔºõ<br>
xR‰∏∫Âè≥ËΩÆÊ∞¥Âπ≥‰ΩçÁßªÔºàmÔºâÔºõ<br>
HfR‰∏∫Âè≥ËΩÆÂèóÂà∞Âú∞Èù¢Êë©Êì¶ÂäõÁöÑÂ§ßÂ∞èÔºàNÔºâÔºõ<br>
HR‰∏∫Âè≥ËΩÆÂèóÂà∞ËΩ¶‰Ωì‰ΩúÁî®ÂäõÁöÑÊ∞¥Âπ≥ÂàÜÂäõÁöÑÂ§ßÂ∞èÔºàNÔºâÔºõ<br>
TR‰∏∫Âè≥ËΩÆÁîµÊú∫ËæìÂá∫ËΩ¨Áü©ÁöÑÂ§ßÂ∞èÔºàN/mÔºâÔºõ<br>
I‰∏∫ËΩ¶ËΩÆÁöÑËΩ¨Âä®ÊÉØÈáèÔºàkg/m2ÔºâÔºõ<br>
WR‰∏∫Âè≥ËΩÆÁöÑËßíÂ∫¶ÁöÑÂ§ßÂ∞èÔºàrad/sÔºâ<br>
<br>
ËÅîÁ´ãÔºà1ÔºâÂíåÔºà2ÔºâÔºåÊ∂àÂéªHfR,ÂèØÂæó<br>
<div align="center">  
<img src="ÂÖ¨Âºè3.png" width="600"/> 
</div>
<p>Âú®ËΩ¶ËΩÆ‰∏çÊâìÊªëÁöÑÊÉÖÂÜµ‰∏ãÔºåËΩ¶ËΩÆÁßªÂä®ÈÄüÂ∫¶ÁöÑÂ§ßÂ∞èÂíåËΩ¨Âä®ÈÄüÂ∫¶ÁöÑÂ§ßÂ∞èÊàêÊØî‰æãÂÖ≥Á≥ªÔºåÂç≥</p>
<div align="center">  
<img src="ÂÖ¨Âºè4.png" width="600"/> 
</div>
<p>Â∞ÜÊñπÁ®ãÔºà4Ôºâ‰ª£ÂÖ•Ôºà3Ôºâ‰∏≠ÔºåÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè5.png" width="600"/> 
</div>
<p>Áî±‰∫éÂ∑¶Âè≥ËΩÆÁöÑÂèÇÊï∞Áõ∏ÂêåÔºåÂàôÂØπÂ∑¶ËΩÆ‰πüÂèØ‰ª•ÂæóÂà∞Áõ∏‰ººÁöÑÁªìÊûúÔºåÂç≥</p>
<div align="center">  
<img src="ÂÖ¨Âºè6.png" width="600"/> 
</div>
<p>b.ÂØπ‰∫éËΩ¶Ë∫´Ê≠£Âêë</p>
<div align="center">  
<img src="ËΩ¶Ë∫´Ê≠£ÂêëÂèóÂäõÂàÜÊûê.png" width="300"/> 
</div>
<p>Â∞èËΩ¶ÁöÑÊ≠£ÂêëËøêÂä®ÂèØ‰ª•ÂàÜËß£‰∏∫ÂâçÂêëËøêÂä®ÂíåÁªïËΩ¶‰ΩìË¥®ÂøÉPÁöÑÁõ∏ÂØπËΩ¨Âä®Ôºà‰øØ‰ª∞Ôºâ„ÄÇÂ∞èËΩ¶Â∫ïÁõò‰∏≠ÂøÉOÁöÑÊ∞¥Âπ≥‰ΩçÁßª</p>
<div align="center">  
<img src="ÂÖ¨Âºè7.png" width="600"/> 
</div>
<p>Â∞ÜÊñπÁ®ãÔºà5ÔºâÂíåÔºà6ÔºâÁõ∏Âä†ÂêéÔºåÁ≠âÂºè‰∏§ËæπÂ§Ñ‰ª•2ÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè8.png" width="600"/> 
</div>
<p>ËÅîÁ´ãÊñπÁ®ãÔºà7ÔºâÔºà8ÔºâÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè9.png" width="600"/> 
</div>
<p>ÂØπËΩ¶‰ΩìÔºåÁî±ÁâõÈ°øÁ¨¨‰∫åÂÆöÂæãÂèØÂæó
Âú®Ê∞¥Âπ≥ÊñπÂêë‰∏äÔºåÊúâ</p>
<div align="center">  
<img src="ÂÖ¨Âºè10.png" width="600"/> 
</div>
<p>Âú®Á´ñÁõ¥ÊñπÂêë‰∏äÔºåÊúâ</p>
<div align="center">  
<img src="ÂÖ¨Âºè11.png" width="600"/> 
</div>
<p>ÂØπËΩ¶‰ΩìÔºåÁî±Âàö‰ΩìÂÆöËΩ¥ËΩ¨Âä®ÂÆöÂæãÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè12.png" width="600"/> 
</div>
<p>ÂÖ∂‰∏≠<br>
M ËΩ¶‰ΩìÁöÑË¥®ÈáèÔºàkgÔºâÔºõ<br>
l Ë¥®ÂøÉË∑ùÂ∫ïÁõò‰∏≠ÂøÉÁöÑË∑ùÁ¶ªÔºàmÔºâÔºõ<br>
JP ËΩ¶‰ΩìÁªïË¥®ÂøÉËΩ¨Âä®Êó∂ÁöÑËΩ¨Âä®ÊÉØÈáèÔºàkg/m2ÔºâÔºõ<br>
Œ∏PËΩ¶‰Ωì‰∏éÁ´ñÁõ¥ÊñπÂêëÊâÄÊàêÁöÑÂ§πËßíÔºàradÔºâÔºõ</p>
<p>ËÅîÁ´ãÊñπÁ®ãÔºà9ÔºâÔºà10ÔºâÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè13.png" width="600"/> 
</div>
<br>
c.Ê®°ÂûãÁ∫øÊÄßÂåñ<br>
Âõ†‰∏∫ËØ•ÊñπÁ®ãÂê´ÊúâÈùûÁ∫øÊÄßÈ°πÔºåÂõ†Ê≠§ÔºåË¶ÅËøõË°åÁ∫øÊÄßÂåñ„ÄÇËÄÉËôëÂà∞ËΩ¶‰ΩìÁöÑÂÄæËßíÊØîËæÉÂ∞èÔºàÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºå‚àí10¬∞‚â§ÂÄæËßí‚â§10¬∞ÔºâÔºåÂàôÂèØ‰ª•ËÆ§‰∏∫
<div align="center">  
<img src="Ê®°ÂûãÁ∫øÊÄßÂåñ.png" width="600"/> 
</div>
<p>ÊïÖÊñπÁ®ãÔºà13ÔºâÂèò‰∏∫</p>
<div align="center">  
<img src="ÂÖ¨Âºè14.png" width="600"/> 
</div>
<p>Â∞ÜÊñπÁ®ãÔºà10ÔºâÂíåÔºà11Ôºâ‰ª£ÂÖ•ÊñπÁ®ãÔºà12Ôºâ‰∏≠ÔºåÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè15.png" width="600"/> 
</div>
<p>Á±ª‰ººÁöÑÔºåÂØπÊñπÁ®ã Ôºà15ÔºâËøõË°åÁ∫øÊÄßÂåñÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè16.png" width="600"/> 
</div>
<p>Â∞ÜÊñπÁ®ãÔºà16Ôºâ‰ª£ÂÖ•ÊñπÁ®ãÔºà14Ôºâ‰∏≠ÔºåÊ∂àÂéªŒ∏P‰∫åÈò∂ÂØºÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè17.png" width="600"/> 
</div>
Âºè‰∏≠
<div align="center">  
<img src="ÂÖ¨Âºè17Ôºà2Ôºâ.png" width="600"/> 
</div>
<p>Â∞ÜÊñπÁ®ãÔºà14Ôºâ‰ª£ÂÖ•ÊñπÁ®ãÔºà16Ôºâ‰∏≠ÔºåÊ∂àÂéªx‰∫åÈò∂ÂØºÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè18.png" width="600"/> 
</div>
Âºè‰∏≠
<div align="center">  
<img src="ÂÖ¨Âºè18Ôºà2Ôºâ.png" width="600"/> 
</div>
<p>Áªº‰∏äÊâÄËø∞ÔºåÂØπ‰∫éÊ≠£ÂêëËøêÂä®Êúâ</p>
<div align="center">  
<img src="ÂÖ¨Âºè19.png" width="600"/> 
</div>
<p>ÂØπËΩ¶‰ΩìÔºåÁî±Âàö‰ΩìÂÆöËΩ¥ËΩ¨Âä®ÂÆöÂæãÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè12.png" width="600"/> 
</div>
<br>
d.ËΩ¨ÂêëËøêÂä®<br>
<div align="center">  
<img src="ËΩ¨ÂêëËøêÂä®ÂèóÂäõÂàÜÊûê.png" width="300"/> 
</div>
ËΩ¨ÂêëËøêÂä®ÊòØÁî±‰∫éÂ∑¶Âè≥‰∏§ËΩ¶ËΩÆ‰ªéÊ∞¥Âπ≥ÊñπÂêë‰∏äÊñΩÂä†ÁªôËΩ¶‰ΩìÁöÑÂèç‰ΩúÁî®ÂäõÁöÑÂ§ßÂ∞èHLÂíåHR‰∏çÁõ∏Á≠âÂºïËµ∑ÁöÑÔºåÂàôÁî±Âàö‰ΩìÂÆöËΩ¥ËΩ¨Âä®ÂÆöÂæãÂèØÂæó
<div align="center">  
<img src="ÂÖ¨Âºè20.png" width="600"/> 
</div>
<p>ÂÖ∂‰∏≠<br>
d ËΩÆË∑ùÔºàmÔºâ<br>
JŒ¥ ËΩ¶‰ΩìÁªïyËΩ¥ËΩ¨Âä®ÁöÑËΩ¨Âä®ÊÉØÈáèÔºàkg/Ôºâ<br>
Œ¥ Â∞èËΩ¶ÁöÑÂÅèËà™ËßíÔºàradÔºâ<br>
Â∞ÜÊñπÁ®ãÔºà5ÔºâÂíåÔºà6ÔºâÁõ∏ÂáèÂèØÂæó<br>
ÂØπËΩ¶‰ΩìÔºåÁî±Âàö‰ΩìÂÆöËΩ¥ËΩ¨Âä®ÂÆöÂæãÂèØÂæó<br></p>
<div align="center">  
<img src="ÂÖ¨Âºè21.png" width="600"/> 
</div>
<p>Â∞èËΩ¶ËΩ¨ÂêëÁ§∫ÊÑèÂõæ</p>
<div align="center">  
<img src="Â∞èËΩ¶ËΩ¨ÂêëÁ§∫ÊÑèÂõæ.png" width="300"/> 
</div>
<p>ÂΩìÂ∑¶Âè≥‰∏§ËΩÆËøêÂä®ÈÄüÂ∫¶‰∏çÁõ∏Á≠âÊó∂ÔºåÂ∞èËΩ¶Ë∫´ËΩ¨ÂêëÔºåÂ¶ÇÂõæ 2-4 ÊâÄÁ§∫„ÄÇÁî±Âá†‰ΩïÂÖ≥Á≥ªÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè22.png" width="600"/> 
</div>
<p>Ëß£Âæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè23.png" width="600"/> 
</div>
<p>Áî±ÊñπÁ®ãÔºà23ÔºâËøõ‰∏ÄÊ≠•ÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè24.png" width="600"/> 
</div>
<p>ËÅîÁ´ãÊñπÁ®ãÔºà20ÔºâÔºà21ÔºâÔºà24ÔºâÂèØÂæó</p>
<div align="center">  
<img src="ÂÖ¨Âºè25.png" width="600"/> 
</div>
<p>Áî±ÊñπÁ®ãÔºà19ÔºâÂíåÔºà25ÔºâÂèØÂæóÁ≥ªÁªüÁöÑÁä∂ÊÄÅÊñπÁ®ã‰∏∫</p>
<div align="center">  
<img src="ÂÖ¨Âºè26.png" width="600"/> 
</div>
<p>Â∑¶‰æßÁöÑÁä∂ÊÄÅÂèòÈáèÂàÜÂà´Ë°®Á§∫Â∞èËΩ¶ÁöÑ‰ΩçÁßª„ÄÅÂâçËøõÈÄüÂ∫¶„ÄÅËΩ¶‰ΩìÁöÑÂÄæËßí„ÄÅËΩ¶‰ΩìÁöÑËßíÈÄüÂ∫¶„ÄÅÂ∞èËΩ¶ÁöÑËΩ¨ÂêëËßí‰ª•ÂèäËΩ¨ÂêëÈÄüÂ∫¶„ÄÇÁî±‰∫éÁîµÊú∫ËæìÂá∫ËΩ¨Áü©ÁöÑÂ§ßÂ∞è‰∏çÂ•ΩÁõ¥Êé•ÊéßÂà∂ÔºåÂàôÁî±Âàö‰ΩìÂÆöËΩ¥ËΩ¨Âä®ÂÆöÂæãÂ∞ÜÂÖ∂ËΩ¨Âåñ‰∏∫‰∏§‰∏™ËΩ¶ËΩÆÁöÑÂä†ÈÄüÂ∫¶„ÄÇ</p>
<div align="center">  
<img src="ÂÖ¨Âºè27.png" width="600"/> 
</div>
<p>ÂÖ∂‰∏≠<br>
VLOÂ∑¶ËΩÆÊó†Êë©Êì¶Êó∂Á∫øÈÄüÂ∫¶ÁöÑÂ§ßÂ∞èÔºàrad/sÔºâ<br>
VROÂè≥ËΩÆÊó†Êë©Êì¶Êó∂Á∫øÈÄüÂ∫¶ÁöÑÂ§ßÂ∞èÔºàrad/sÔºâ<br>
ÊïÖÁ≥ªÁªüÁöÑÁä∂ÊÄÅÁ©∫Èó¥Ë°®ËææÂºèÂèò‰∏∫<br></p>
<div align="center">  
<img src="ÂÖ¨Âºè28.png" width="600"/> 
</div>
<div align="center">  
<img src="ÂÖ¨Âºè28Ôºà2Ôºâ.png" width="600"/> 
</div>
Áü©Èòµ‰∏≠ÁöÑÂÖÉÁ¥†‰∏∫
<div align="center">  
<img src="ÂÖ¨Âºè28Ôºà3Ôºâ.png" width="600"/> 
</div>
ÂÖ∂‰∏≠
<div align="center">  
<img src="ÂÖ¨Âºè28Ôºà4Ôºâ.png" width="600"/> 
</div>
<h4 id="lqrÊéßÂà∂Âô®">LQRÊéßÂà∂Âô®</h4>
<div align="center">  
<img src="Á∫øÊÄß‰∫åÊ¨°Ë∞ÉËäÇÂô®.png" width="600"/> 
</div>
<p><strong>ÊúÄ‰ºòÊéßÂà∂</strong>Âú®Áé∞‰ª£ÊéßÂà∂ÁêÜËÆ∫‰∏≠ÊúâÁùÄÂèäÂÖ∂ÈáçË¶ÅÁöÑ‰ΩçÁΩÆÔºåÂÖ∂Á†îÁ©∂ÁõÆÊ†áÊòØ‰ΩøÂèóÊéßÁ≥ªÁªüÁöÑÊÄßËÉΩÊåáÊ†áËææÂà∞ÊúÄ‰ºòÊó∂ÔºåÊâÄÈúÄË¶ÅÁöÑÂü∫Êú¨Êù°‰ª∂ÔºåÂèäÂÖ∂ÊéßÂà∂ÁöÑÁªºÂêàÊñπÊ≥ï„ÄÇ
<strong>Á∫øÊÄß‰∫åÊ¨°ÂûãÔºàLQRÔºâÊéßÂà∂</strong>ÔºåÊòØ‰∏ÄÁßçÁ∫øÊÄßÁä∂ÊÄÅÂèçÈ¶àÊéßÂà∂ÊñπÊ≥ïÔºåÊòØÊúÄ‰ºòÊéßÂà∂ÁêÜ
ËÆ∫‰∏≠ÊúÄÊàêÁÜü„ÄÅÊúÄÁ≥ªÁªüÁöÑÊñπÊ≥ï„ÄÇ</p>
<p>(1)Á≥ªÁªüÁä∂ÊÄÅÊñπÁ®ã</p>
<div align="center">  
<img src="ÂÖ¨Âºè119.png" width="600"/> 
</div>
<p>(2)ÊÄßËÉΩÊåáÊ†á</p>
<div align="center">  
<img src="ÂÖ¨Âºè120.png" width="600"/> 
</div>
<p>(3)ÂèçÈ¶àÂ¢ûÁõäÁü©ÈòµK</p>
<div align="center">  
<img src="ÂÖ¨Âºè30.png" width="600"/> 
</div>
<p>(4)Riccati‰ª£Êï∞ÊñπÁ®ã</p>
<div align="center">  
<img src="ÂÖ¨Âºè123.png" width="600"/> 
</div>
<h4 id="‰ªøÁúü">‰ªøÁúü</h4>
<p>(1)SimulinkÊ®°Âûã</p>
<div align="center">  
<img src="SimulinkÊ®°Âûã.png" width="600"/> 
</div>
<p>(2)MATLAB‰ª£Á†Å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">clc
</span></span><span class="line"><span class="cl">clear
</span></span><span class="line"><span class="cl">% Ê®°ÂûãÂèÇÊï∞ÂàùÂßãÂåñ
</span></span><span class="line"><span class="cl">m=0.178; %ËΩ¶ËΩÆÁöÑË¥®Èáè kg
</span></span><span class="line"><span class="cl">r = 0.03375; %ËΩ¶ËΩÆÁöÑÂçäÂæÑ m
</span></span><span class="line"><span class="cl">M = 0.610; %ËΩ¶‰ΩìÁöÑË¥®Èáè kg
</span></span><span class="line"><span class="cl">I = 0.5*m*r^2; %ËΩ¶ËΩÆÁöÑËΩ¨Âä®ÊÉØÈáè
</span></span><span class="line"><span class="cl">l = 0.055; %Ë¥®ÂøÉË∑ùÂ∫ïÁõò‰∏≠ÂøÉÁöÑË∑ùÁ¶ª
</span></span><span class="line"><span class="cl">Jz = (1/3)*M*l*l; %ËΩ¶‰ΩìÁªïË¥®ÂøÉËΩ¨Âä®Êó∂ÁöÑËΩ¨Âä®ÊÉØÈáè
</span></span><span class="line"><span class="cl">g=9.8;                     %ÈáçÂäõÂä†ÈÄüÂ∫¶ÔºåÂçï‰Ωç‰∏∫m/s^2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%Áä∂ÊÄÅÁ©∫Èó¥ÂèÇÊï∞ÂàùÂßãÂåñ
</span></span><span class="line"><span class="cl">a=r*(M+2*m+2*I/(r^2));
</span></span><span class="line"><span class="cl">b=M*r*l;
</span></span><span class="line"><span class="cl">c=Jz+M*l^2;
</span></span><span class="line"><span class="cl">d=M*g*l;
</span></span><span class="line"><span class="cl">e=M*l;
</span></span><span class="line"><span class="cl">A23=-b*d/(a*c-b*e);
</span></span><span class="line"><span class="cl">A43=a*d/(a*c-b*e);
</span></span><span class="line"><span class="cl">B21=(c+b)/(a*c-b*e);
</span></span><span class="line"><span class="cl">B22=(c+b)/(a*c-b*e);
</span></span><span class="line"><span class="cl">B41=-(e+a)/(a*c-b*e);
</span></span><span class="line"><span class="cl">B42=-(e+a)/(a*c-b*e);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%Áä∂ÊÄÅÁ©∫Èó¥Áü©Èòµ
</span></span><span class="line"><span class="cl">A=[0 1  0  0 ;
</span></span><span class="line"><span class="cl">   0 0 A23 0 ;
</span></span><span class="line"><span class="cl">   0 0  0  1;
</span></span><span class="line"><span class="cl">   0 0 A43 0 ]  ;                      %Áä∂ÊÄÅÁü©Èòµ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">B=[0 0;
</span></span><span class="line"><span class="cl">    B21 B22;
</span></span><span class="line"><span class="cl">    0 0;
</span></span><span class="line"><span class="cl">    B41 B42];     %ËæìÂÖ•Áü©Èòµ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%Á≥ªÁªüÂèØÊéßÊÄßÂà§Êñ≠
</span></span><span class="line"><span class="cl">Co=ctrb(A,B);
</span></span><span class="line"><span class="cl">if(rank(Co)==4)
</span></span><span class="line"><span class="cl">    disp(&#39;Á≥ªÁªüÂèØÊéß&#39;);
</span></span><span class="line"><span class="cl">else
</span></span><span class="line"><span class="cl">    disp(&#39;Á≥ªÁªü‰∏çÂèØÊéß&#39;);
</span></span><span class="line"><span class="cl">end
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%LQRÊéßÂà∂Âô®ËÆæËÆ°
</span></span><span class="line"><span class="cl">  Q = [0.1 0  0    0 ;
</span></span><span class="line"><span class="cl">         0   1 0   0 ; 
</span></span><span class="line"><span class="cl">         0   0 70 0 ; 
</span></span><span class="line"><span class="cl">         0   0  0    0.05 ]; %ÊùÉÈáçÁü©Èòµ Q ÁöÑËÆæËÆ°
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    R = [120 0; 0 120]; %ÊùÉÈáçÁü©Èòµ R ÁöÑËÆæËÆ°
</span></span><span class="line"><span class="cl">K=lqr(A,B,Q,R)                         %Ë∞ÉËäÇÂèÇÊï∞
</span></span></code></pre></td></tr></table>
</div>
</div><p>(3)python‰ª£Á†Å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">import numpy as np
</span></span><span class="line"><span class="cl">import control as ctrl
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Ê®°ÂûãÂèÇÊï∞ÂàùÂßãÂåñ
</span></span><span class="line"><span class="cl">m = 0.178  # ËΩ¶ËΩÆÁöÑË¥®Èáè kg
</span></span><span class="line"><span class="cl">r = 0.03375  # ËΩ¶ËΩÆÁöÑÂçäÂæÑ m
</span></span><span class="line"><span class="cl">M = 0.610  # ËΩ¶‰ΩìÁöÑË¥®Èáè kg
</span></span><span class="line"><span class="cl">I = 0.5 * m * r**2  # ËΩ¶ËΩÆÁöÑËΩ¨Âä®ÊÉØÈáè
</span></span><span class="line"><span class="cl">l = 0.055  # Ë¥®ÂøÉË∑ùÂ∫ïÁõò‰∏≠ÂøÉÁöÑË∑ùÁ¶ª
</span></span><span class="line"><span class="cl">Jz = (1/3) * M * l * l  # ËΩ¶‰ΩìÁªïË¥®ÂøÉËΩ¨Âä®Êó∂ÁöÑËΩ¨Âä®ÊÉØÈáè
</span></span><span class="line"><span class="cl">g = 9.8  # ÈáçÂäõÂä†ÈÄüÂ∫¶ m/s¬≤
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Áä∂ÊÄÅÁ©∫Èó¥ÂèÇÊï∞ËÆ°ÁÆó
</span></span><span class="line"><span class="cl">a = r * (M + 2*m + 2*I/(r**2))
</span></span><span class="line"><span class="cl">b = M * r * l
</span></span><span class="line"><span class="cl">c = Jz + M * l**2
</span></span><span class="line"><span class="cl">d = M * g * l
</span></span><span class="line"><span class="cl">e = M * l
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># ËÆ°ÁÆó‰∏≠Èó¥ÂèÇÊï∞
</span></span><span class="line"><span class="cl">denominator = a*c - b*e  # ÂÖ¨ÂÖ±ÂàÜÊØç
</span></span><span class="line"><span class="cl">A23 = -b*d / denominator
</span></span><span class="line"><span class="cl">A43 = a*d / denominator
</span></span><span class="line"><span class="cl">B21 = (c + b) / denominator
</span></span><span class="line"><span class="cl">B22 = B21  # ‰∏é B21 Áõ∏Âêå
</span></span><span class="line"><span class="cl">B41 = -(e + a) / denominator
</span></span><span class="line"><span class="cl">B42 = B41  # ‰∏é B41 Áõ∏Âêå
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># ÊûÑÂª∫Áä∂ÊÄÅÁ©∫Èó¥Áü©Èòµ
</span></span><span class="line"><span class="cl">A = np.array([
</span></span><span class="line"><span class="cl">    [0, 1, 0, 0],
</span></span><span class="line"><span class="cl">    [0, 0, A23, 0],
</span></span><span class="line"><span class="cl">    [0, 0, 0, 1],
</span></span><span class="line"><span class="cl">    [0, 0, A43, 0]
</span></span><span class="line"><span class="cl">])
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">B = np.array([
</span></span><span class="line"><span class="cl">    [0, 0],
</span></span><span class="line"><span class="cl">    [B21, B22],
</span></span><span class="line"><span class="cl">    [0, 0],
</span></span><span class="line"><span class="cl">    [B41, B42]
</span></span><span class="line"><span class="cl">])
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Ê£ÄÊü•Á≥ªÁªüÂèØÊéßÊÄß
</span></span><span class="line"><span class="cl">Co = ctrl.ctrb(A, B)
</span></span><span class="line"><span class="cl">rank = np.linalg.matrix_rank(Co)
</span></span><span class="line"><span class="cl">print(&#34;Á≥ªÁªüÂèØÊéß&#34; if rank == 4 else &#34;Á≥ªÁªü‰∏çÂèØÊéß&#34;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># LQRÊéßÂà∂Âô®ËÆæËÆ°
</span></span><span class="line"><span class="cl">Q = np.array([
</span></span><span class="line"><span class="cl">    [0.1, 0, 0, 0],
</span></span><span class="line"><span class="cl">    [0, 1, 0, 0],
</span></span><span class="line"><span class="cl">    [0, 0, 70, 0],
</span></span><span class="line"><span class="cl">    [0, 0, 0, 0.05]
</span></span><span class="line"><span class="cl">])
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">R = np.array([
</span></span><span class="line"><span class="cl">    [120, 0],
</span></span><span class="line"><span class="cl">    [0, 120]
</span></span><span class="line"><span class="cl">])
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># ËÆ°ÁÆóLQRÂ¢ûÁõä
</span></span><span class="line"><span class="cl">K, _, _ = ctrl.lqr(A, B, Q, R)
</span></span><span class="line"><span class="cl">print(&#34;\nLQRÂ¢ûÁõäÁü©Èòµ K:&#34;)
</span></span><span class="line"><span class="cl">print(K)
</span></span></code></pre></td></tr></table>
</div>
</div><p>(4)ÂÆûÈ™åÁªìÊûú</p>
<div align="center">  
<img src="‰ªøÁúüÁªìÊûú.png" width="400"/> 
</div>
<p>Ê†∏ÂøÉÊòØË∞ÉËäÇQ/RÁü©ÈòµÁöÑ4‰∏™ÊùÉÈáçÂÄºÔºà‰ΩçÁΩÆ/ÈÄüÂ∫¶/ËßíÂ∫¶/ËßíÈÄüÂ∫¶)<br>
ËßíÂ∫¶ÊùÉÈáç &raquo; ‰ΩçÁΩÆÊùÉÈáç (ÈÄöÂ∏∏10ÂÄç‰ª•‰∏ä)</p>
<h4 id="ÂèÇËÄÉËµÑÊñô">ÂèÇËÄÉËµÑÊñô</h4>
<p><a class="link" href="https://blog.csdn.net/qq_42681425/article/details/147955308?sharetype=blogdetail&amp;shareId=147955308&amp;sharerefer=APP&amp;sharesource=xiumabao0646&amp;sharefrom=link"  target="_blank" rel="noopener"
    >„ÄêÁîµÊú∫‰ªøÁúü„ÄëLQRÊéßÂà∂Âô®‚Äî‚Äî‰∫åËΩÆÂπ≥Ë°°Â∞èËΩ¶ÊéßÂà∂</a></p>
<p><a class="link" href="https://www.eet-china.com/mp/a44309.html"  target="_blank" rel="noopener"
    >Ë∂ÖËØ¶ÁªÜ!!ÂèåËΩÆÂπ≥Ë°°Â∞èËΩ¶ÂéüÁêÜÂàÜÊûê,ÊñáÊú´ÈôÑSTM32Ê∫êÁ†Å!</a></p>
<h4 id="ÂÆûÁâ©ÈÉ®ÁΩ≤">ÂÆûÁâ©ÈÉ®ÁΩ≤</h4>
<p>ÈÄöËøáLQRÁü©ÈòµÂàÜÂà´‰∏éÂØπÂ∫îÁöÑÊï∞ÂÄºÂ∑ÆËÆ°ÁÆóÂÜçÁ¥ØÂä†ÔºåÂèØÂæóÂá∫ÁîµÊú∫ÁöÑÂäõÁü©Â§ßÂ∞èÔºåÂ¶ÇÊûúÂè™ÊòØÁõ¥Á´ãÁöÑËØùÔºåÂè™ËÆ°ÁÆóÂÖ∂‰∏≠‰∏Ä‰∏™ÂäõÁü©ÔºåÂè¶Â§ñ‰∏Ä‰∏™Êï∞ÂÄºÂç≥Á≠âÂ§ßÂèçÂêë„ÄÇ<br>
Â∞ÜÁ®ãÂ∫èÁÉßÂΩïÂà∞Â∞èËΩ¶‰∏äÂêéÂèØËßÇÂØüÂá∫ÂäõÁü©ÊñπÂêëÁúãÊòØÂê¶Ê≠£Ë¥üÂèç‰∫Ü„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">float lqr_k[2][4]={{-0.02041241, -0.09635536, -0.65913956, -0.03197374},
</span></span><span class="line"><span class="cl"> {-0.02041241, -0.09635536, -0.65913956, -0.03197374}};
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">void ChassisR_task(void)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">	while(INS.ins_flag==0)
</span></span><span class="line"><span class="cl">	{//Á≠âÂæÖÂä†ÈÄüÂ∫¶Êî∂Êïõ
</span></span><span class="line"><span class="cl">	  osDelay(1);	
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  ChassisR_init(&amp;chassis_move);
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	while(1)
</span></span><span class="line"><span class="cl">	{	
</span></span><span class="line"><span class="cl">		chassisR_feedback_update(&amp;chassis_move,&amp;INS);//Êõ¥Êñ∞Êï∞ÊçÆ
</span></span><span class="line"><span class="cl">							
</span></span><span class="line"><span class="cl">    	chassis_move.wheel_motor[1].wheel_T=lqr_k[0][0]*(chassis_move.x_set-chassis_move.x)
</span></span><span class="line"><span class="cl">						+lqr_k[0][1]*(chassis_move.v_set-chassis_move.v)
</span></span><span class="line"><span class="cl">						+lqr_k[0][2]*(0.03f-chassis_move.myPithR)//0.03radÊòØÊú∫Ê¢∞‰∏≠ÂÄº
</span></span><span class="line"><span class="cl">						+lqr_k[0][3]*(chassis_move.d_phi_set-chassis_move.myPithGyroR);
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		chassis_move.wheel_motor[0].wheel_T=-chassis_move.wheel_motor[1].wheel_T;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		scaled_down(&amp;chassis_move.wheel_motor[0].wheel_T, &amp;chassis_move.wheel_motor[1].wheel_T,-0.1f,0.1f); //ÈôêÂπÖÔºåÁ≠âÊØî‰æãÁº©Êîæ 
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">		if(chassis_move.start_flag==1)	
</span></span><span class="line"><span class="cl">		{
</span></span><span class="line"><span class="cl">			mit_ctrl2(&amp;hfdcan1,0x01, 0.0f, 0.0f,0.0f, 0.0f,chassis_move.wheel_motor[0].wheel_T);//Â∑¶ËæπÁîµÊú∫
</span></span><span class="line"><span class="cl">			osDelay(CHASSR_TIME);
</span></span><span class="line"><span class="cl">			mit_ctrl2(&amp;hfdcan1,0x02, 0.0f, 0.0f,0.0f, 0.0f,chassis_move.wheel_motor[1].wheel_T);//Âè≥ËæπÁîµÊú∫
</span></span><span class="line"><span class="cl">			osDelay(CHASSR_TIME);
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">		else if(chassis_move.start_flag==0)	
</span></span><span class="line"><span class="cl">		{
</span></span><span class="line"><span class="cl">			chassis_move.turn_set=chassis_move.total_yaw;
</span></span><span class="line"><span class="cl">			mit_ctrl2(&amp;hfdcan1,0x01, 0.0f, 0.0f,0.0f, 0.0f,0.0f);//Â∑¶ËæπÁîµÊú∫	
</span></span><span class="line"><span class="cl">			osDelay(CHASSR_TIME);
</span></span><span class="line"><span class="cl">			mit_ctrl2(&amp;hfdcan1,0x02, 0.0f, 0.0f,0.0f, 0.0f,0.0f);//Âè≥ËæπÁîµÊú∫	
</span></span><span class="line"><span class="cl">			osDelay(CHASSR_TIME);
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">} 
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏äÈù¢ÁöÑÁ®ãÂ∫è‰∏≠ËÆ°ÁÆóÂá∫ÂäõÁü©ÂêéËøòÊòØËøõË°å‰∫ÜÈôêÂπÖÁöÑÊìç‰ΩúÔºåÈò≤Ê≠¢ÂäõÁü©ËøáÂ§ß„ÄÇ<br>
Â∞èËΩ¶ÊàêÂäüÁõ¥Á´ãÂêéÂèØÂæÆË∞ÉKÁü©ÈòµËÆ©ÊïàÊûúÊõ¥Â•Ω</p>
<h3 id="3Â∞èËΩ¶ÈÅ•Êéß">3„ÄÅÂ∞èËΩ¶ÈÅ•Êéß</h3>
<p><strong>Á°¨‰ª∂ÂèäÈÅ•ÊéßÊï∞ÊçÆÊé•Êî∂Á®ãÂ∫è</strong></p>
<p>Â∞èËΩ¶ÈÅ•ÊéßÁöÑÊé•Êî∂ÊùøÈÄâÁî®ÁöÑÊòØÂ∏¶ËìùÁâôwifiÁöÑwsp32ÔºåÊó¢ÂèØ‰ª•ÂÆûÁé∞2.4gÁΩëÁªúÈÅ•ÊéßÔºå‰πüÂèØ‰ª•ÈÄöËøáËìùÁâôÈÅ•ÊéßÔºå‰ª∑Ê†º‰πü‰∏çÊØîÂçïÁã¨ÁöÑËìùÁâôÊ®°ÂùóË¥µ„ÄÇ<br>
ÊâãÊüÑÈÄâÁî®ÁöÑÊòØÂõΩ‰∫ßxboxÁ≥ªÂàóÁöÑÔºåÂàöÂ•Ωgithub‰∏äÊúâÁΩëÂèãÂàÜ‰∫´‰∫Ü<a class="link" href="https://github.com/xiaocainiao11111/ESP32_connect_XboxController"  target="_blank" rel="noopener"
    >xbox+esp32ÁöÑÁ®ãÂ∫è</a>ÔºåÁ®çÂæÆÊîπ‰∏ãÂç≥ÂèØ‰ΩøÁî®„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">void loop()
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">¬† xboxController.onLoop();
</span></span><span class="line"><span class="cl">¬† delay(50);# ÊéßÂà∂ÂèëÈÄÅÈ¢ëÁéá
</span></span><span class="line"><span class="cl">¬† if ((xboxController.xboxNotif.btnStart == 1) &amp;&amp; (last_start != xboxController.xboxNotif.btnStart))
</span></span><span class="line"><span class="cl">¬† ¬† if (start == 0)
</span></span><span class="line"><span class="cl">¬† ¬† ¬† start = 1;
</span></span><span class="line"><span class="cl">¬† ¬† else
</span></span><span class="line"><span class="cl">¬† ¬† ¬† start = 0;
</span></span><span class="line"><span class="cl">¬† last_start = xboxController.xboxNotif.btnStart;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">¬† if (xboxController.isConnected() &amp;&amp; (start == 1))
</span></span><span class="line"><span class="cl">¬† {
</span></span><span class="line"><span class="cl">¬† ¬† if (xboxController.isWaitingForFirstNotification())
</span></span><span class="line"><span class="cl">¬† ¬† {
</span></span><span class="line"><span class="cl">¬† ¬† ¬† Serial.println(&#34;waiting for first notification&#34;);
</span></span><span class="line"><span class="cl">¬† ¬† }
</span></span><span class="line"><span class="cl">¬† ¬† else
</span></span><span class="line"><span class="cl">¬† ¬† {
</span></span><span class="line"><span class="cl">¬† ¬† ¬† Serial.print(xbox_string());
</span></span><span class="line"><span class="cl">¬† ¬† }
</span></span><span class="line"><span class="cl">¬† }
</span></span><span class="line"><span class="cl">¬† else if (!xboxController.isConnected() &amp;&amp; (start == 1))
</span></span><span class="line"><span class="cl">¬† {
</span></span><span class="line"><span class="cl">¬† ¬† Serial.println(&#34;not connected&#34;);
</span></span><span class="line"><span class="cl">¬† ¬† if (xboxController.getCountFailedConnection() &gt; 2)
</span></span><span class="line"><span class="cl">¬† ¬† {
</span></span><span class="line"><span class="cl">¬† ¬† ¬† ESP.restart();
</span></span><span class="line"><span class="cl">¬† ¬† }
</span></span><span class="line"><span class="cl">¬† }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàëËøôÈáåÊîπÁöÑÂú∞ÊñπÊòØÂ¢ûÂä†Âª∂Êó∂Êù•ÊéßÂà∂ÂèëÈÄÅÈ¢ëÁéáÔºåÂè¶Â§ñÂ¢ûÂä†‰∫ÜÊåâÈîÆÊù•ÊéßÂà∂ÊòØÂê¶ÂèëÈÄÅÊâãÊüÑÊï∞ÊçÆÂà∞‰∏≤Âè£„ÄÇ</p>
<p>ÊúÄÂêéÂ¢ûÂä†‰∏™freertosÁöÑ‰ªªÂä°‰∏ìÈó®Â§ÑÁêÜÊâãÊüÑÊï∞ÊçÆÂç≥ÂèØ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">void Xbox_task(void)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">    if (esp32_rx_flag)
</span></span><span class="line"><span class="cl">    {
</span></span><span class="line"><span class="cl">        // Ê∏ÖÈô§Êé•Êî∂ÂÆåÊàêÊ†áÂøó
</span></span><span class="line"><span class="cl">        esp32_rx_flag = 0;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        // Á°Æ‰øùÊï∞ÊçÆÁªìÂ∞æÊúâÊç¢Ë°åÁ¨¶
</span></span><span class="line"><span class="cl">        if (esp32_rx_len &gt; 0 &amp;&amp; esp32_rx_buffer[esp32_rx_len - 1] == &#39;\n&#39;)
</span></span><span class="line"><span class="cl">        {
</span></span><span class="line"><span class="cl">            // Â§çÂà∂Êï∞ÊçÆÂà∞‰∏¥Êó∂ÁºìÂÜ≤Âå∫ÔºåÂπ∂Ê∑ªÂä†Â≠óÁ¨¶‰∏≤ÁªìÊùüÁ¨¶
</span></span><span class="line"><span class="cl">            char temp_buffer[ESP32_RX_BUFFER_SIZE];
</span></span><span class="line"><span class="cl">            // ÊéíÈô§ &#39;\n&#39;ÔºåÂè™Â§çÂà∂‰∏≠Èó¥ÁöÑÊï∞ÊçÆÈÉ®ÂàÜ
</span></span><span class="line"><span class="cl">            strncpy(temp_buffer, (char*)esp32_rx_buffer, esp32_rx_len - 1);
</span></span><span class="line"><span class="cl">            temp_buffer[esp32_rx_len - 1] = &#39;\0&#39;;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            char *token;
</span></span><span class="line"><span class="cl">            char *rest = temp_buffer;
</span></span><span class="line"><span class="cl">            int data_index = 0;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            // Ëß£ÊûêÊâÄÊúâ22‰∏™Êï∞ÊçÆ
</span></span><span class="line"><span class="cl">            while ((token = strtok_r(rest, &#34;,&#34;, &amp;rest)) != NULL)
</span></span><span class="line"><span class="cl">            {
</span></span><span class="line"><span class="cl">                switch (data_index)
</span></span><span class="line"><span class="cl">                {
</span></span><span class="line"><span class="cl">                    case 0: xbox_controller_data.btnY = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 1: xbox_controller_data.btnX = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 2: xbox_controller_data.btnB = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 3: xbox_controller_data.btnA = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 4: xbox_controller_data.btnLB = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 5: xbox_controller_data.btnRB = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 6: xbox_controller_data.btnSelect = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 7: xbox_controller_data.btnStart = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 8: xbox_controller_data.btnXbox = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 9: xbox_controller_data.btnShare = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 10: xbox_controller_data.btnLS = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 11: xbox_controller_data.btnRS = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 12: xbox_controller_data.btnDirUp = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 13: xbox_controller_data.btnDirRight = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 14: xbox_controller_data.btnDirDown = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 15: xbox_controller_data.btnDirLeft = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 16: xbox_controller_data.joyLHori = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 17: xbox_controller_data.joyLVert = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 18: xbox_controller_data.joyRHori = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 19: xbox_controller_data.joyRVert = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 20: xbox_controller_data.trigLT = atoi(token); break;
</span></span><span class="line"><span class="cl">                    case 21: xbox_controller_data.trigRT = atoi(token); break;
</span></span><span class="line"><span class="cl">                    default: break;
</span></span><span class="line"><span class="cl">                }
</span></span><span class="line"><span class="cl">                data_index++;
</span></span><span class="line"><span class="cl">            }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		if(xbox_controller_data.btnY == 1 &amp;&amp; start_flag == 0)
</span></span><span class="line"><span class="cl">		{//ÂêØÂä®
</span></span><span class="line"><span class="cl">			chassis_move.start_flag=1;
</span></span><span class="line"><span class="cl">			start_flag = 1;
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">		else if(xbox_controller_data.btnY == 1 &amp;&amp; start_flag == 1)
</span></span><span class="line"><span class="cl">		{//ÂÅúÊ≠¢
</span></span><span class="line"><span class="cl">			chassis_move.start_flag=0;
</span></span><span class="line"><span class="cl">			start_flag = 0;
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		if(chassis_move.start_flag==1)
</span></span><span class="line"><span class="cl">		{
</span></span><span class="line"><span class="cl">			if(xbox_controller_data.btnB == 1 &amp;&amp; pause_flag == 0)
</span></span><span class="line"><span class="cl">			{//ÊöÇÂÅú
</span></span><span class="line"><span class="cl">				chassis_move.front_flag=0;
</span></span><span class="line"><span class="cl">				chassis_move.turn_flag=0;
</span></span><span class="line"><span class="cl">				chassis_move.v_set=0.0f;
</span></span><span class="line"><span class="cl">				chassis_move.turn_set=chassis_move.total_yaw;
</span></span><span class="line"><span class="cl">			}
</span></span><span class="line"><span class="cl">			else if(xbox_controller_data.btnDirUp == 1)
</span></span><span class="line"><span class="cl">			{//ÂâçËøõ
</span></span><span class="line"><span class="cl">				chassis_move.front_flag=1;
</span></span><span class="line"><span class="cl">				chassis_move.v_set=5.0f*vel_ratio;
</span></span><span class="line"><span class="cl">				chassis_move.x_set=chassis_move.x_set+chassis_move.v_set*0.02f;				
</span></span><span class="line"><span class="cl">			}
</span></span><span class="line"><span class="cl">			else if(xbox_controller_data.btnDirDown == 1)
</span></span><span class="line"><span class="cl">			{//ÂêéÈÄÄ
</span></span><span class="line"><span class="cl">				chassis_move.front_flag=1;
</span></span><span class="line"><span class="cl">				chassis_move.v_set=-5.0f*vel_ratio;
</span></span><span class="line"><span class="cl">				chassis_move.x_set=chassis_move.x_set+chassis_move.v_set*0.02f;				
</span></span><span class="line"><span class="cl">			}
</span></span><span class="line"><span class="cl">			else if(xbox_controller_data.btnDirLeft == 1)
</span></span><span class="line"><span class="cl">			{//Â∑¶ËΩ¨
</span></span><span class="line"><span class="cl">				chassis_move.turn_flag=1;
</span></span><span class="line"><span class="cl">				chassis_move.turn_set=10.0f*vel_ratio;
</span></span><span class="line"><span class="cl">			}
</span></span><span class="line"><span class="cl">			else if(xbox_controller_data.btnDirRight == 1)
</span></span><span class="line"><span class="cl">			{//Âè≥ËΩ¨
</span></span><span class="line"><span class="cl">				chassis_move.turn_flag=1;
</span></span><span class="line"><span class="cl">				chassis_move.turn_set=-10.0f*vel_ratio;
</span></span><span class="line"><span class="cl">			}
</span></span><span class="line"><span class="cl">			else if(xbox_controller_data.btnLB == 1)
</span></span><span class="line"><span class="cl">			{
</span></span><span class="line"><span class="cl">				vel_ratio-=0.05f;
</span></span><span class="line"><span class="cl">				// Â∞Ü vel_ratio ÈôêÂà∂Âú® [0.2, 0.6] ËåÉÂõ¥ÂÜÖ
</span></span><span class="line"><span class="cl">				vel_ratio=(vel_ratio &lt; 0.2f) ? 0.2f : ((vel_ratio &gt; 0.6f) ? 0.6f : vel_ratio);
</span></span><span class="line"><span class="cl">			}
</span></span><span class="line"><span class="cl">			else if(xbox_controller_data.btnRB == 1)
</span></span><span class="line"><span class="cl">			{
</span></span><span class="line"><span class="cl">				vel_ratio+=0.05f;
</span></span><span class="line"><span class="cl">				// Â∞Ü vel_ratio ÈôêÂà∂Âú® [0.2, 0.6] ËåÉÂõ¥ÂÜÖ
</span></span><span class="line"><span class="cl">				vel_ratio=(vel_ratio &lt; 0.2f) ? 0.2f : ((vel_ratio &gt; 0.6f) ? 0.6f : vel_ratio);
</span></span><span class="line"><span class="cl">			}
</span></span><span class="line"><span class="cl">			else
</span></span><span class="line"><span class="cl">			{//ÊöÇÂÅú
</span></span><span class="line"><span class="cl">				chassis_move.front_flag=0;
</span></span><span class="line"><span class="cl">				chassis_move.turn_flag=0;
</span></span><span class="line"><span class="cl">				chassis_move.v_set=0.0f;
</span></span><span class="line"><span class="cl">				chassis_move.turn_set=chassis_move.total_yaw;
</span></span><span class="line"><span class="cl">			}
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">			pause_flag = xbox_controller_data.btnB;
</span></span><span class="line"><span class="cl">		}	
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">		osDelay(1);
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÈÅ•ÊéßÊï∞ÊçÆÂ§ÑÁêÜÁ®ãÂ∫è</strong><br>
Âü∫‰∫éÁõ¥Á´ãÁöÑÁ®ãÂ∫èËøõË°å‰øÆÊîπ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">float Turn_Kp=0.03f;
</span></span><span class="line"><span class="cl">float Turn_Kd=0.12;
</span></span><span class="line"><span class="cl">//ËΩ¨ÂêëÁéØ
</span></span><span class="line"><span class="cl">float Turn(float Angle,float Gyro)
</span></span><span class="line"><span class="cl">{  
</span></span><span class="line"><span class="cl">	 float tor3;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	 if(chassis_move.turn_flag==1)
</span></span><span class="line"><span class="cl">	 {
</span></span><span class="line"><span class="cl">		 tor3=(chassis_move.turn_set-Gyro)*Turn_Kd;
</span></span><span class="line"><span class="cl">	 }
</span></span><span class="line"><span class="cl">	 else if(chassis_move.turn_flag==0)
</span></span><span class="line"><span class="cl">	 {
</span></span><span class="line"><span class="cl">	   tor3=Turn_Kp*(chassis_move.turn_set-Angle)-Gyro*Turn_Kd; 
</span></span><span class="line"><span class="cl">	 } 
</span></span><span class="line"><span class="cl">	 return tor3;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">void ChassisR_task(void)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">	while(INS.ins_flag==0)
</span></span><span class="line"><span class="cl">	{//Á≠âÂæÖÂä†ÈÄüÂ∫¶Êî∂Êïõ
</span></span><span class="line"><span class="cl">	  osDelay(1);	
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  ChassisR_init(&amp;chassis_move);
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	while(1)
</span></span><span class="line"><span class="cl">	{	
</span></span><span class="line"><span class="cl">		chassisR_feedback_update(&amp;chassis_move,&amp;INS);//Êõ¥Êñ∞Êï∞ÊçÆ
</span></span><span class="line"><span class="cl">							
</span></span><span class="line"><span class="cl">    chassis_move.wheel_motor[0].wheel_T=lqr_k[0][0]*(chassis_move.x_set-chassis_move.x)
</span></span><span class="line"><span class="cl">								+lqr_k[0][1]*(chassis_move.v_set-chassis_move.v)
</span></span><span class="line"><span class="cl">								+lqr_k[0][2]*(0.03f-chassis_move.myPithR)//0.03radÊòØÊú∫Ê¢∞‰∏≠ÂÄº
</span></span><span class="line"><span class="cl">								+lqr_k[0][3]*(chassis_move.d_phi_set-chassis_move.myPithGyroR);
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		chassis_move.wheel_motor[1].wheel_T=lqr_k[1][0]*(chassis_move.x_set-chassis_move.x)
</span></span><span class="line"><span class="cl">								+lqr_k[1][1]*(chassis_move.v_set-chassis_move.v)
</span></span><span class="line"><span class="cl">								+lqr_k[1][2]*(0.03f-chassis_move.myPithR)//0.03radÊòØÊú∫Ê¢∞‰∏≠ÂÄº
</span></span><span class="line"><span class="cl">								+lqr_k[1][3]*(chassis_move.d_phi_set-chassis_move.myPithGyroR);
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		chassis_move.wheel_motor[0].wheel_T=0.0f-chassis_move.wheel_motor[0].wheel_T;
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		turn_T= Turn(chassis_move.total_yaw,INS.Gyro[2]);
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		chassis_move.wheel_motor[0].wheel_T=chassis_move.wheel_motor[0].wheel_T-turn_T;
</span></span><span class="line"><span class="cl">		chassis_move.wheel_motor[1].wheel_T=chassis_move.wheel_motor[1].wheel_T-turn_T;
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		scaled_down(&amp;chassis_move.wheel_motor[0].wheel_T, &amp;chassis_move.wheel_motor[1].wheel_T,-0.1f,0.1f);
</span></span><span class="line"><span class="cl">			
</span></span><span class="line"><span class="cl">		if(chassis_move.start_flag==1)	
</span></span><span class="line"><span class="cl">		{
</span></span><span class="line"><span class="cl">			mit_ctrl2(&amp;hfdcan1,0x01, 0.0f, 0.0f,0.0f, 0.0f,chassis_move.wheel_motor[0].wheel_T);//Â∑¶ËæπÁîµÊú∫
</span></span><span class="line"><span class="cl">			osDelay(CHASSR_TIME);
</span></span><span class="line"><span class="cl">			mit_ctrl2(&amp;hfdcan1,0x02, 0.0f, 0.0f,0.0f, 0.0f,chassis_move.wheel_motor[1].wheel_T);//Âè≥ËæπÁîµÊú∫
</span></span><span class="line"><span class="cl">			osDelay(CHASSR_TIME);
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">		else if(chassis_move.start_flag==0)	
</span></span><span class="line"><span class="cl">		{
</span></span><span class="line"><span class="cl">			chassis_move.turn_set=chassis_move.total_yaw;
</span></span><span class="line"><span class="cl">			mit_ctrl2(&amp;hfdcan1,0x01, 0.0f, 0.0f,0.0f, 0.0f,0.0f);//Â∑¶ËæπÁîµÊú∫	
</span></span><span class="line"><span class="cl">			osDelay(CHASSR_TIME);
</span></span><span class="line"><span class="cl">			mit_ctrl2(&amp;hfdcan1,0x02, 0.0f, 0.0f,0.0f, 0.0f,0.0f);//Âè≥ËæπÁîµÊú∫	
</span></span><span class="line"><span class="cl">			osDelay(CHASSR_TIME);
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂõõË∞ÉËØïÂøÉÂæó">Âõõ„ÄÅË∞ÉËØïÂøÉÂæó</h2>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Áé∞Ë±°</th>
<th>Ê†πÊú¨ÂéüÂõ†</th>
<th>Ëß£ÂÜ≥ÊñπÊ°à</th>
</tr>
</thead>
<tbody>
<tr>
<td>È´òÈ¢ëÊäñÂä® (&gt;10Hz)</td>
<td>ÈÄüÂ∫¶È°πÊùÉÈáç‰∏çË∂≥</td>
<td>‚Üë Q<a class="link" href="%e9%80%9f%e5%ba%a6" >1</a> / ‚Üë Q<a class="link" href="%e8%a7%92%e9%80%9f%e5%ba%a6" >3</a></td>
</tr>
<tr>
<td>‰ΩéÈ¢ëÊëáÊëÜ (0.5~2Hz)</td>
<td>RÂÄºËøáÂ§ßÊàñ‰ΩçÁΩÆÊùÉÈáçËøáÈ´ò</td>
<td>‚Üì R Êàñ ‚Üì Q<a class="link" href="%e4%bd%8d%e7%bd%ae" >0</a></td>
</tr>
<tr>
<td>ÂèóÊâ∞ÊÅ¢Â§çÊÖ¢ (&gt;1s)</td>
<td>ËßíÂ∫¶ÊùÉÈáç‰∏çË∂≥</td>
<td>‚Üë Q<a class="link" href="%e8%a7%92%e5%ba%a6" >2</a></td>
</tr>
<tr>
<td>ÁîµÊú∫ÂèëÁÉ´</td>
<td>RÂÄºËøáÂ∞è</td>
<td>‚Üë R</td>
</tr>
<tr>
<td>‰ΩçÁΩÆÊåÅÁª≠ÊºÇÁßª</td>
<td>‰ΩçÁΩÆÊùÉÈáçËøá‰Ωé</td>
<td>‚Üë Q[0] ÂêåÊó∂ ‚Üë R Èò≤Êäñ</td>
</tr>
</tbody>
</table></div>
<h2 id="‰∫îÂÆûÁâ©Â±ïÁ§∫">‰∫î„ÄÅÂÆûÁâ©Â±ïÁ§∫</h2>
<p>ÂÆûÁâ©‰∏≠‰∏∫Êñπ‰æøË∞ÉËØïÂä†ÂÖ•‰∫ÜlcdÊòæÁ§∫Â±èÂíåÊó†Á∫ø‰ªøÁúüÂô®ÔºåÂπ∂Â∞ÜÂ§ñËßÇÂÅöÊàê‰∫ÜÁ±ª‰ººÂ∞èÁ±≥9Âè∑Âπ≥Ë°°ËΩ¶ÁöÑÊ†∑Â≠ê„ÄÇ






    


<div class="video-wrapper">
    <iframe src="https://player.bilibili.com/player.html?as_wide=1&amp;high_quality=1&amp;page=1&bvid=BV1ERuzzHEXi"
            scrolling="no"
            frameborder="no"
            framespacing="0"
            allowfullscreen="true"
    >
    </iframe>
</div>
</p>
<p><strong>ÊâÄÊ∂âÂèäËµÑÊñôÈÉΩÂ∑≤ÊîæÂú®githubÔºåÊúâÈúÄË¶ÅÂèØËá™Ë°å‰∏ãËΩΩ„ÄÇ</strong><br>
<a class="link" href="https://github.com/wenke-chen/DM-segway"  target="_blank" rel="noopener"
    >ÊâÄÁî®‰ª£Á†Å„ÄÅBOMÂèä3DÊñá‰ª∂</a>
<a class="link" href="https://github.com/wenke-chen/DM-segway"  target="_blank" rel="noopener"
    >https://github.com/wenke-chen/DM-segway</a></p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/%E5%B9%B3%E8%A1%A1%E5%B0%8F%E8%BD%A6/">Âπ≥Ë°°Â∞èËΩ¶</a>
        
            <a href="/tags/%E6%97%A0%E5%88%B7%E7%94%B5%E6%9C%BA/">Êó†Âà∑ÁîµÊú∫</a>
        
            <a href="/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA/">Êú∫Âô®‰∫∫</a>
        
            <a href="/tags/stm32/">STM32</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/segway_pid/">
        
        
            <div class="article-image">
                <img src="/p/segway_pid/car.a49386605f2a900380ac564fd8294a93_huedaa8f5f72a7c1929b4fa5b365acec86_54738_250x150_fill_box_smart1_3.png" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Âü∫‰∫éÊó†Âà∑ÁîµÊú∫ÁöÑÂπ≥Ë°°Â∞èËΩ¶(PID)"
                        data-key="segway_pid" 
                        data-hash="md5-pJOGYF8qkAOArFZP2ClKkw==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Âü∫‰∫éÊó†Âà∑ÁîµÊú∫ÁöÑÂπ≥Ë°°Â∞èËΩ¶(PID)</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "wenke-chen's blog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2025 wenke-chen&#39;s blog
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.21.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
